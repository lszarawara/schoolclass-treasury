<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:>
<head>
  <meta charset="UTF-8">
  <title>Dodaj użytkownika</title>
  <link rel="stylesheet" href="/webjars/bootstrap/5.2.0/css/bootstrap.min.css">
  <script src="/webjars/bootstrap/5.2.0/js/bootstrap.min.js"></script>
</head>
<body>
<div class="container">

    <h2 th:switch="${preForm.transactionType}">
        <span th:case="pay">Wprowadzenie wpłat dzieci w klasie</span>
        <span th:case="deb">Wprowadzenie wydatków w klasie</span>
    </h2>

    <form th:unless="${isPredefined}" th:action="@{/mvc/transaction/precreate}" th:object="${preForm}"
          method="post">

        <input type="hidden" th:field="${preForm.transactionType}" class="form-control" id="transactionType1">

        <div class="mb-3">
            <label for="description" class="form-label">Opis transakcji:</label>
            <input type="text" th:field="*{description}" class="form-control" th:value="Wpłata" id="description">
        </div>

        <div class="mb-3">
            <label for="date" class="form-label">Data:</label>
            <input type="date" th:field="*{date}"  class="form-control" id="date">
        </div>



        <div th:if="${preForm.transactionType == 'deb'}" class="mb-3">
            <label for="amount" class="form-label">Kwota - gdy przypisanie ma być równe (dla wszystkich lub wybranych uczniów):</label>
            <input type="number" step=".01" th:field="*{amount}"  class="form-control" id="amount">
        </div>



        <div th:if="${preForm.transactionType == 'deb'}" class="form-group">

            <div class="custom-control custom-radio custom-control-inline">
                <input type="radio" id="option1" name="option1" class="custom-control-input" value="1" th:field="*{selectedOption}">
                <label class="custom-control-label" for="option1">Podziel kwotę po równo na wszystkie dzieci</label>
            </div>
            <div class="custom-control custom-radio custom-control-inline">
                <input type="radio" id="option2" name="option2" class="custom-control-input" value="2" th:field="*{selectedOption}">
                <label class="custom-control-label" for="option2">Przypisz tą kwotę dla każdego z dzieci</label>
            </div>
            <div class="custom-control custom-radio custom-control-inline">
                <input type="radio" id="option3" name="option1" class="custom-control-input" value="3" th:field="*{selectedOption}">
                <label class="custom-control-label" for="option3">Podziel kwotę po równo na wybrane dzieci</label>
            </div>
            <div class="custom-control custom-radio custom-control-inline">
                <input type="radio" id="option4" name="option2" class="custom-control-input" value="4" th:field="*{selectedOption}">
                <label class="custom-control-label" for="option4">Przypisz tą kwotę wybranym dzieciom</label>
            </div>
            <div class="custom-control custom-radio custom-control-inline">
                <input type="radio" id="option5" name="option3" class="custom-control-input" value="5" th:field="*{selectedOption}">
                <label class="custom-control-label" for="option5">Swobodne przypisanie wydatków</label>
            </div>
        </div>

        <p></p>
        <input class="btn btn-primary" type="submit" id="preSubmitButton" th:value="Dalej">


    </form>

    <form th:if="${isPredefined}" th:action="@{/mvc/transaction/create}" th:object="${form}"
              method="post">
        <input type="hidden" th:field="${preForm.transactionType}" class="form-control" id="transactionType2">
        <input type="hidden" th:field="${preForm.selectedOption}" class="form-control" id="selectedOption">
        <input type="hidden" th:field="${preForm.amount}" class="form-control" id="amount">

        <div class="mb-3">
<!--            <label for="description" class="form-label">Opis transakcji:</label>-->
<!--            <input type="text" th:object="${description}" class="form-control" th:value="Wpłata" id="description">-->
            <p th:text="'Opis transakcji: ' + ${form.getTransactions().get(1).getDescription()}"></p>
        </div>

        <div class="mb-3">
<!--            <label for="date" class="form-label">Data:</label>-->
<!--            <input type="text" th:object="${transactionDate}" th:value="${transactionDate}" class="form-control" id="date">-->
            <p th:text="'Data: ' + ${preForm.date}"></p>
        </div>

        <P th:text="'Opcja: ' + ${preForm.selectedOption}" ></P>

        <fieldset>



            <table>
                <thead>
                <tr>
                    <th></th>
                    <th></th>
                    <th> Child</th>
                    <th> Amount</th>
                    <th> Desc</th>
                    <th> Date</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="transaction, itemStat : *{transactions}">
                    <td><input type="hidden" th:field="*{transactions[__${itemStat.index}__].child}" /></td>
                    <td><input type="hidden" th:field="*{transactions[__${itemStat.index}__].type}" /></td>
                    <td th:text="*{transactions[__${itemStat.index}__].child.getFirstName() + ' ' + transactions[__${itemStat.index}__].child.getLastName()}"></td>
<!--                    <td><input type="text" th:value="*{transactions[__${itemStat.index}__].child.getFirstName() + ' ' + transactions[__${itemStat.index}__].child.getLastName()}" readonly></td>-->
                    <td><input type="number" step=".01" tabindex=1 th:field="*{transactions[__${itemStat.index}__].amount}" /></td>
                    <td><input tabindex=0 th:field="*{transactions[__${itemStat.index}__].description}" /></td>
                    <td><input type="date" tabindex=0 th:field="*{transactions[__${itemStat.index}__].date}" /></td>
                </tr>
                </tbody>
            </table>
            <p></p>
            <input class="btn btn-primary" type="submit" id="submitButton" th:value="'Przypisz kwoty'">
        </fieldset>
    </form>



</div>
</body>
</html>